# Longest subarray with absolute difference<=k


the maximum difference is <=k    
maxx-minn<=k, longest subarray which satisfies this condition


maxx hain, minn hain in a subarray, laga dijiye monotic queue


https://leetcode.com/problems/longest-continuous-subarray-with-absolute-diff-less-than-or-equal-to-limit/description/


proving it is doable by two pointers


changing h will just increase the number of new elements which can further increase the difference, you have to increase l to decrease the difference


```python
void insertMinD(deque<int> &d, int idx, vector<int>& v){
    while(!d.empty() and v[d.back()]>=v[idx]) d.pop_back();
    d.push_back(idx);
}
//for minnIdx


void insertMaxD(deque<int> &d, int idx, vector<int>& v){
while(!d.empty() and v[d.back()]<=v[idx]) d.pop_back();
d.push_back(idx);        
}
//for maximum

int longestSubarray(vector<int>& v, int k) {
//longest subarray
//abs of any two elements<=k
int ans=0;
deque<int> minD,maxD;
int l=0,h=0,n=v.size();
while(h<n){
    insertMinD(minD,h,v);
    insertMaxD(maxD,h,v);
    int minnIdx=minD.front(),maxxIdx=maxD.front();
    if(abs(v[maxxIdx]-v[minnIdx])<=k){
        ans=max(ans,h-l+1);
        h++;
    }   
    else{
        l++;
        if(l>minD.front()) minD.pop_front();
        if(l>maxD.front()) maxD.pop_front();                
    }
}    
return ans;
}
```
