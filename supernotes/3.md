[LeetCode - The World's Leading Online Programming Learning Platform](https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iii/submissions/734220786/)

```cpp
int maxProfit(vector<int>& prices) {
  int t1Cost = INT_MAX, 
      t2Cost = INT_MAX;
  int t1Profit = 0,
      t2Profit = 0;

  for (int price : prices) {
      // the maximum profit if only one transaction is allowed
      t1Cost = min(t1Cost, price);
      t1Profit = max(t1Profit, price - t1Cost);
      // re-invest the gained profit in the second transaction
      t2Cost = min(t2Cost, price - t1Profit);
      t2Profit = max(t2Profit, price - t2Cost);
  }

  return t2Profit;
}
```

