---
title: 1
---

{% raw %}
https://atcoder.jp/contests/dp/tasks/dp_i  
Let N be a positive odd number.   
1≤N≤2999    
There are N coins, numbered 1,2,…,N.  
when Coin i is tossed, it comes up heads with probability pi​ and tails with probability 1−pi​

Taro has tossed all the N coins. Find the probability of having more heads than tails.

![image.png](/transfernew/notebook_images/transfernew_ADCLCHJC_1Algorithms_40DP_8Probability_1__att_0001.png)

![image.png](/transfernew/notebook_images/transfernew_ADCLCHJC_1Algorithms_40DP_8Probability_1__att_0002.png)

```python
//ans
double sum=0;
for(ll i=n/2+1;i<=n;i++){
    sum+=dp[n][i];
}
cout<<fixed<<setprecision(10)<<sum<<nl;
```

![image.png](/transfernew/notebook_images/transfernew_ADCLCHJC_1Algorithms_40DP_8Probability_1__att_0003.png)

```python
//base case
dp[1][0]=1-v[0];
dp[1][1]=v[0];
```

```python
double dp[3000][3000];
double v[3000];
void solve() {
    iinp(n);
    for(ll i=0;i<n;i++){
        cin>>v[i];
    }
    dp[1][0]=1-v[0];
    dp[1][1]=v[0];
    for(ll i=2;i<=n;i++){
        for(ll j=0;j<=i;j++){
            dp[i][j]+=(1-v[i-1])*dp[i-1][j];
            if(j>0) dp[i][j]+=v[i-1]*dp[i-1][j-1];
        }
    }
    double sum=0;
    for(ll i=n/2+1;i<=n;i++){
        sum+=dp[n][i];
    }
    cout<<fixed<<setprecision(10)<<sum<<nl;
}
```
{% endraw %}
