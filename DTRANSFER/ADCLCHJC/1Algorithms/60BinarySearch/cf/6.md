---
title: 6
---

{% raw %}
https://codeforces.com/problemset/problem/1623/C

maximum number of stones in the smallest heap after the process?, laga dijiye bs

![image.png](/transfernew/notebook_images/transfernew_ADCLCHJC_1Algorithms_60BinarySearch_cf_6__att_0001.png)

l=minn, h=maxx

```python
bool f(ll m, vl &v, ll n){
    vl contributionsFromRight(n,0);
    contributionsFromRight[n-1]=0;
    for(int i=n-1;i>=2;i--){
        ll tmp=v[i]+contributionsFromRight[i];
        if(tmp<m){
            return 0;
        }
        ll toGive=min(v[i],tmp-m);
        //we are going from left to right in actual
        ll d3=toGive/3;
        contributionsFromRight[i-1]+=d3;
        contributionsFromRight[i-2]+=2*d3;
    }
    if(v[0]+contributionsFromRight[0]<m or v[1]+contributionsFromRight[1]<m ){
        return 0;
    }
    return 1;
}

void solve(){
    iinp(n);
    vinp(v,n);
    ll l=0,h=*max_element(it(v)),ans=-1;
    while(l<=h){
        ll m=l +(h-l)/2;
        if(f(m, v, n)){
            ans=m;
            l=m+1;
        }
        else{
            h=m-1;
        }
    }
    pri(ans);
}
```
{% endraw %}
