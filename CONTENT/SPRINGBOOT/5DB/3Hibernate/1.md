1. ORM
2. ![image.png](/images/image-334.png)

Eariler we are getting ResultSets which we have to travel by while loop

This gives object representation of the tables

4. Internally uses JDBC
    1. Queries generated by hibernate get executed using JDBC
5. We write queries in JPQL which are converted to SQL queries (optimized and scalable queries)
6. Generate optimized tables

![image.png](/images/image-335.png)

Aliter to Hibernate is 

1. Eclipse link, 
2. Open JPA

![image.png](/images/image-337.png)



```
public static void main(String[] args) {
    EntityManagerFactory emf= Persistence.createEntityManagerFactory("MyPersistenceUnit");
    //persistanceUnitName
    //A factory is associated with a particular persistance unit
    //We can have separate persitance units hence factories for different db
    //we write different configuration for each persistance unit   

    EntityManager em=emf.createEntityManager();

    
///////////////////////////////////
    em.getTransaction().begin();
    
    ////////////////////////////////////////////////
    MyAccount account = new MyAccount();
    account.setId(1L );
    account.setName("John Doe");
    account.setAge(25);
    ////////////////////////////////////////////////

    em.persist(account);

    em.getTransaction().commit();

    em.close();
}
```



Here is how MyAccount class will look

> Same as JPA Entity?

```
@Entity
//Instructs hibernate to map it to a table

@Table(name = "account")

@Immutable

public class MyAccount {
//////////////////
    
    @GeneratedValue
    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    @Id
    //doubt where to place it
    @GeneratedValue
    private long id;

//////////////////////

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    private String name;
////////////////////////


    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    //for immutable columns (doubt)
    @Column(updatable=false)     //can be updated by command line
    
    //similary we have

    @Column(nullable=false) //this happens at command line level

    private int age;
/////////////////
```

Through reflection, by default we do not need getters and setters (doubt)

![image.png](/images/image-338.png)

```
<persistence
        version="2.2"
        xmlns="http://xmlns.jcp.org/xml/ns/persistence"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence
        http://xmlns.jcp.org/xml/ns/persistence_2_2.xsd"
        >
    
    <persistence-unit name="MyPersistenceUnit">
        <provider>org.hibernate.jpa.HibernatePersistenceProvider</provider>
        <properties>
            <property name="hibernate.connection.driver_class" value="org.postgresql.Driver"/>
            <property name="hibernate.connection.url" value="jdbc:postgresql://localhost:5432/one"/>
            <property name="hibernate.connection.username" value="tm"/>
            <property name="hibernate.connection.password" value="password"/>
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.hbm2ddl.auto" value="update"/>
            <property name="hibernate.auto_quote_keyword" value="true"/>
        </properties>
            </persistence-unit>
</persistence>
```





![image.png](/images/image-339.png)

